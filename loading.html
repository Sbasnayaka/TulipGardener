<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tulip Gardener Loading</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>

<body class="loading-body">
    <!-- Glowing Orbs Background reused exactly -->
    <div class="home-glow-orb top-left"></div>
    <div class="home-glow-orb bottom-right"></div>
    <div class="home-glow-orb center-left"></div>
    <div class="home-glow-orb top-right"></div>

    <!-- Main Container Layout Without Glass Pill -->
    <main class="loading-main-card" id="main-card">

        <!-- Exterior Floating Text (Hidden until open) -->
        <div class="lets-go-text" id="lets-go-text">
            <svg width="400" height="100" viewBox="0 0 400 100">
                <path id="curve-letsgo" d="M 20,80 Q 200,10 380,80" fill="transparent" />
                <!-- Sketched appearance text -->
                <text font-size="22" fill="transparent" stroke="#B39DCD" stroke-width="1.5"
                    style="font-family:'Fredericka the Great', serif; letter-spacing: 2px;">
                    <textPath href="#curve-letsgo" startOffset="50%" text-anchor="middle">Let's goooooooooooooooooooo
                    </textPath>
                </text>
            </svg>
        </div>

        <!-- Double Doors -->
        <div class="loading-door-container" id="door-container" style="cursor: pointer;">
            <!-- Target for the incoming 1000 particles -->
            <div id="sparkle-target" class="sparkle-target"></div>

            <!-- Magical core hidden behind the doors -->
            <div class="magical-core" id="magical-core">
                <!-- Raining shining things container -->
                <div id="rain-container" class="rain-container"></div>

                <!-- Shimmering particles (added as shining points) -->
                <div class="particles">
                    <div class="particle p1" style="top:20%; left:20%; font-size: 18px;">✦</div>
                    <div class="particle p2" style="top:80%; left:70%; font-size: 12px; animation-delay: 0.5s;">✧</div>
                    <div class="particle p3" style="top:50%; left:80%; font-size: 20px; animation-delay: 1.2s;">✦</div>
                    <div class="particle p4" style="top:70%; left:30%; font-size: 14px; animation-delay: 0.8s;">✧</div>
                    <div class="particle p5" style="top:15%; left:65%; font-size: 16px; animation-delay: 1.5s;">✦</div>
                    <div class="particle p6" style="top:85%; left:45%; font-size: 22px; animation-delay: 0.2s;">✧</div>
                    <div class="particle p7" style="top:40%; left:15%; font-size: 14px; animation-delay: 1.8s;">✦</div>
                    <div class="particle p8" style="top:30%; left:55%; font-size: 18px; animation-delay: 0.7s;">✧</div>
                </div>

                <!-- Interior Content (Revealed after glow) -->
                <div class="interior-ui" id="interior-ui">
                    <!-- Top Curve Text scaled for 260px width -->
                    <svg class="curve-top" width="260" height="90" viewBox="0 0 260 90">
                        <path id="curve-top-path" d="M 30,80 Q 130,-30 230,80" fill="transparent" />
                        <text font-family="'Poppins', sans-serif" font-size="13" fill="#B39DCD">
                            <textPath href="#curve-top-path" startOffset="50%" text-anchor="middle">are you new
                                player....?</textPath>
                        </text>
                    </svg>

                    <button class="interior-btn" style="top: 110px;"
                        onclick="window.location.href='auth.html?mode=signup'">Sign up</button>
                    <button class="interior-btn" style="top: 170px;"
                        onclick="window.location.href='auth.html?mode=login'">Login</button>

                    <!-- Bottom Curve Text scaled for 260px width -->
                    <svg class="curve-bottom" width="260" height="90" viewBox="0 0 260 90">
                        <path id="curve-bottom-path" d="M 30,20 Q 130,120 230,20" fill="transparent" />
                        <text font-family="'Poppins', sans-serif" font-size="12" fill="#B39DCD">
                            <textPath href="#curve-bottom-path" startOffset="50%" text-anchor="middle">Heyy long time no
                                see....</textPath>
                        </text>
                    </svg>
                </div>
            </div>

            <!-- Door Panels with 3D Depth & Gradient -->
            <div class="loading-door left" id="door-left">
                <div class="loading-nob"></div>
            </div>
            <div class="loading-door right" id="door-right">
                <div class="loading-nob"></div>
            </div>
        </div>

    </main>

    <script>
        const doorContainer = document.getElementById('door-container');
        const mainCard = document.getElementById('main-card');
        const interiorUi = document.getElementById('interior-ui');

        // Generate Swarm of 1000 particles hiding under the door
        function createSwarm() {
            const container = document.getElementById('sparkle-target');
            for (let i = 0; i < 1000; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'swarm-particle';

                // Randomize positions spreading outwards
                const angle = Math.random() * Math.PI * 2;
                const distance = 400 + Math.random() * 800; // spawn far away
                const startX = Math.cos(angle) * distance;
                const startY = Math.sin(angle) * distance;

                sparkle.style.setProperty('--startX', startX + 'px');
                sparkle.style.setProperty('--startY', startY + 'px');
                sparkle.style.setProperty('--delay', (Math.random() * 1.5) + 's');

                container.appendChild(sparkle);
            }
        }

        // Generate Raining shining things
        function createRain() {
            const container = document.getElementById('rain-container');
            for (let i = 0; i < 40; i++) {
                const rainDrop = document.createElement('div');
                rainDrop.className = 'rain-particle';
                rainDrop.innerHTML = Math.random() > 0.5 ? '✦' : '✧';
                rainDrop.style.left = Math.random() * 100 + '%';
                rainDrop.style.animationDelay = (Math.random() * 2) + 's';
                rainDrop.style.fontSize = (10 + Math.random() * 14) + 'px';

                // Add some depth variation
                if (Math.random() > 0.7) {
                    rainDrop.style.filter = 'blur(1px)';
                    rainDrop.style.opacity = '0.5';
                }

                container.appendChild(rainDrop);
            }
        }

        // Initialize swarm on load
        window.addEventListener('DOMContentLoaded', createSwarm);

        function triggerOpen() {
            // Prevent double click
            if (mainCard.classList.contains('is-open')) return;

            // Trigger door swing
            mainCard.classList.add('is-open');

            // Trigger raining shining things
            createRain();

            // Show UI buttons after door opens
            setTimeout(() => {
                interiorUi.classList.add('visible');
            }, 1000); // reduced delay since glow is gone
        }

        doorContainer.addEventListener('click', triggerOpen);
    </script>
</body>

</html>